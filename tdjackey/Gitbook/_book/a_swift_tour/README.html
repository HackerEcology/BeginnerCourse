<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>A Swift Tour | My Book</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../big_o_notation/README.html" />
    
    
    <link rel="prev" href="../index.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="1" data-basepath=".." data-revision="1421407784305">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="1" data-path="a_swift_tour/README.html">
            
                
                    <a href="../a_swift_tour/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         A Swift Tour
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="big_o_notation/README.html">
            
                
                    <a href="../big_o_notation/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Big O Notation
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="sorting/README.html">
            
                
                    <a href="../sorting/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Sorting
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >My Book</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_572">
                    
                        <h1 id="swift-">Swift 初见</h1>
<hr>
<p>本页内容包括：</p>
<ul>
<li><a href="#simple_values">简单值（Simple Values）</a></li>
<li><a href="#control_flow">控制流（Control Flow）</a></li>
<li><a href="#functions_and_closures">函数和闭包（Functions and Closures）</a></li>
<li><a href="#objects_and_classes">对象和类（Objects and Classes）</a></li>
<li><a href="#enumerations_and_structures">枚举和结构体（Enumerations and Structures）</a></li>
<li><a href="#protocols_and_extensions">协议和扩展（Protocols and Extensions）</a></li>
<li><a href="#generics">泛型（Generics）</a></li>
</ul>
<p>通常来说，编程语言教程中的第一个程序应该在屏幕上打印“Hello, world”。在 Swift 中，可以用一行代码实现：</p>
<pre><code class="lang-swift"><span class="hljs-built_in">println</span>(<span class="hljs-string">"Hello, world"</span>)
</code></pre>
<p>如果你写过 C 或者 Objective-C 代码，那你应该很熟悉这种形式——在 Swift 中，这行代码就是一个完整的程序。你不需要为了输入输出或者字符串处理导入一个单独的库。全局作用域中的代码会被自动当做程序的入口点，所以你也不需要<code>main</code>函数。你同样不需要在每个语句结尾写上分号。</p>
<p>这个教程会通过一系列编程例子来让你对 Swift 有初步了解，如果你有什么不理解的地方也不用担心——任何本章介绍的内容都会在后面的章节中详细讲解。</p>
<blockquote>
<p>注意：
为了获得最好的体验，在 Xcode 当中使用代码预览功能。代码预览功能可以让你编辑代码并实时看到运行结果。
<a href="https://github.com/numbbbbb/the-swift-programming-language-in-chinese/raw/gh-pages/source/chapter1/GuidedTour.playground.zip">打开Playground</a></p>
</blockquote>
<p><a name="simple_values"></a></p>
<h2 id="">简单值</h2>
<p>使用<code>let</code>来声明常量，使用<code>var</code>来声明变量。一个常量的值，在编译的时候，并不需要有明确的值，但是你只能为它赋值一次。也就是说你可以用常量来表示这样一个值：你只需要决定一次，但是需要使用很多次。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> myVariable = <span class="hljs-number">42</span>
myVariable = <span class="hljs-number">50</span>
<span class="hljs-keyword">let</span> myConstant = <span class="hljs-number">42</span>
</code></pre>
<p>常量或者变量的类型必须和你赋给它们的值一样。然而，声明时类型是可选的，声明的同时赋值的话，编译器会自动推断类型。在上面的例子中，编译器推断出<code>myVariable</code>是一个整数（integer）因为它的初始值是整数。</p>
<p>如果初始值没有提供足够的信息（或者没有初始值），那你需要在变量后面声明类型，用冒号分割。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> implicitInteger = <span class="hljs-number">70</span>
<span class="hljs-keyword">let</span> implicitDouble = <span class="hljs-number">70.0</span>
<span class="hljs-keyword">let</span> explicitDouble: <span class="hljs-type">Double</span> = <span class="hljs-number">70</span>
</code></pre>
<blockquote>
<p>练习：
创建一个常量，显式指定类型为<code>Float</code>并指定初始值为4。</p>
</blockquote>
<p>值永远不会被隐式转换为其他类型。如果你需要把一个值转换成其他类型，请显式转换。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> label = <span class="hljs-string">"The width is"</span>
<span class="hljs-keyword">let</span> width = <span class="hljs-number">94</span>
<span class="hljs-keyword">let</span> widthLabel = label + <span class="hljs-type">String</span>(width)
</code></pre>
<blockquote>
<p>练习：
删除最后一行中的<code>String</code>，错误提示是什么？</p>
</blockquote>
<p>有一种更简单的把值转换成字符串的方法：把值写到括号中，并且在括号之前写一个反斜杠。例如：</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> apples = <span class="hljs-number">3</span>
<span class="hljs-keyword">let</span> oranges = <span class="hljs-number">5</span>
<span class="hljs-keyword">let</span> appleSummary = <span class="hljs-string">"I have <span class="hljs-subst">\(apples)</span> apples."</span>
<span class="hljs-keyword">let</span> fruitSummary = <span class="hljs-string">"I have <span class="hljs-subst">\(apples + oranges)</span> pieces of fruit."</span>
</code></pre>
<blockquote>
<p>练习：
使用<code>\()</code>来把一个浮点计算转换成字符串，并加上某人的名字，和他打个招呼。</p>
</blockquote>
<p>使用方括号<code>[]</code>来创建数组和字典，并使用下标或者键（key）来访问元素。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> shoppingList = [<span class="hljs-string">"catfish"</span>, <span class="hljs-string">"water"</span>, <span class="hljs-string">"tulips"</span>, <span class="hljs-string">"blue paint"</span>]
shoppingList[<span class="hljs-number">1</span>] = <span class="hljs-string">"bottle of water"</span>
</code></pre>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> occupations = [
    <span class="hljs-string">"Malcolm"</span>: <span class="hljs-string">"Captain"</span>,
    <span class="hljs-string">"Kaylee"</span>: <span class="hljs-string">"Mechanic"</span>,
]
occupations[<span class="hljs-string">"Jayne"</span>] = <span class="hljs-string">"Public Relations"</span>
</code></pre>
<p>要创建一个空数组或者字典，使用初始化语法。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> emptyArray = [<span class="hljs-type">String</span>]()
<span class="hljs-keyword">let</span> emptyDictionary = [<span class="hljs-type">String</span>: <span class="hljs-type">Float</span>]()
</code></pre>
<p>如果类型信息可以被推断出来，你可以用<code>[]</code>和<code>[:]</code>来创建空数组和空字典——就像你声明变量或者给函数传参数的时候一样。</p>
<pre><code class="lang-swift">shoppingList = []
occupations = [:]
</code></pre>
<p><a name="control_flow"></a></p>
<h2 id="">控制流</h2>
<p>使用<code>if</code>和<code>switch</code>来进行条件操作，使用<code>for-in</code>、<code>for</code>、<code>while</code>和<code>do-while</code>来进行循环。包裹条件和循环变量括号可以省略，但是语句体的大括号是必须的。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> individualScores = [<span class="hljs-number">75</span>, <span class="hljs-number">43</span>, <span class="hljs-number">103</span>, <span class="hljs-number">87</span>, <span class="hljs-number">12</span>]
<span class="hljs-keyword">var</span> teamScore = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> individualScores {
    <span class="hljs-keyword">if</span> score &gt; <span class="hljs-number">50</span> {
        teamScore += <span class="hljs-number">3</span>
    } <span class="hljs-keyword">else</span> {
        teamScore += <span class="hljs-number">1</span>
    }
}
teamScore
</code></pre>
<p>在<code>if</code>语句中，条件必须是一个布尔表达式——这意味着像<code>if score { ... }</code>这样的代码将报错，而不会隐形地与 0 做对比。</p>
<p>你可以一起使用<code>if</code>和<code>let</code>来处理值缺失的情况。有些变量的值是可选的。一个可选的值可能是一个具体的值或者是<code>nil</code>，表示值缺失。在类型后面加一个问号来标记这个变量的值是可选的。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> optionalString: <span class="hljs-type">String</span>? = <span class="hljs-string">"Hello"</span>
optionalString == <span class="hljs-built_in">nil</span>

<span class="hljs-keyword">var</span> optionalName: <span class="hljs-type">String</span>? = <span class="hljs-string">"John Appleseed"</span>
<span class="hljs-keyword">var</span> greeting = <span class="hljs-string">"Hello!"</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> name = optionalName {
    greeting = <span class="hljs-string">"Hello, <span class="hljs-subst">\(name)</span>"</span>
}
</code></pre>
<blockquote>
<p>练习：
把<code>optionalName</code>改成<code>nil</code>，greeting会是什么？添加一个<code>else</code>语句，当<code>optionalName</code>是<code>nil</code>时给greeting赋一个不同的值。</p>
</blockquote>
<p>如果变量的可选值是<code>nil</code>，条件会判断为<code>false</code>，大括号中的代码会被跳过。如果不是<code>nil</code>，会将值赋给<code>let</code>后面的常量，这样代码块中就可以使用这个值了。</p>
<p><code>switch</code>支持任意类型的数据以及各种比较操作——不仅仅是整数以及测试相等。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> vegetable = <span class="hljs-string">"red pepper"</span>
<span class="hljs-keyword">switch</span> vegetable {
<span class="hljs-keyword">case</span> <span class="hljs-string">"celery"</span>:
    <span class="hljs-keyword">let</span> vegetableComment = <span class="hljs-string">"Add some raisins and make ants on a log."</span>
<span class="hljs-keyword">case</span> <span class="hljs-string">"cucumber"</span>, <span class="hljs-string">"watercress"</span>:
    <span class="hljs-keyword">let</span> vegetableComment = <span class="hljs-string">"That would make a good tea sandwich."</span>
<span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> x <span class="hljs-keyword">where</span> x.hasSuffix(<span class="hljs-string">"pepper"</span>):
    <span class="hljs-keyword">let</span> vegetableComment = <span class="hljs-string">"Is it a spicy <span class="hljs-subst">\(x)</span>?"</span>
<span class="hljs-keyword">default</span>:
    <span class="hljs-keyword">let</span> vegetableComment = <span class="hljs-string">"Everything tastes good in soup."</span>
}
</code></pre>
<blockquote>
<p>练习：
删除<code>default</code>语句，看看会有什么错误？</p>
</blockquote>
<p>运行<code>switch</code>中匹配到的子句之后，程序会退出<code>switch</code>语句，并不会继续向下运行，所以不需要在每个子句结尾写<code>break</code>。</p>
<p>你可以使用<code>for-in</code>来遍历字典，需要两个变量来表示每个键值对。字典是一个无序的集合，所以他们的键和值以任意顺序迭代结束。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> interestingNumbers = [
    <span class="hljs-string">"Prime"</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>],
    <span class="hljs-string">"Fibonacci"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>],
    <span class="hljs-string">"Square"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>],
]
<span class="hljs-keyword">var</span> largest = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> (kind, numbers) <span class="hljs-keyword">in</span> interestingNumbers {
    <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> numbers {
        <span class="hljs-keyword">if</span> number &gt; largest {
            largest = number
        }
    }
}
largest
</code></pre>
<blockquote>
<p>练习：
添加另一个变量来记录哪种类型的数字是最大的。</p>
</blockquote>
<p>使用<code>while</code>来重复运行一段代码直到不满足条件。循环条件可以在开头也可以在结尾。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> n = <span class="hljs-number">2</span>
<span class="hljs-keyword">while</span> n &lt; <span class="hljs-number">100</span> {
    n = n * <span class="hljs-number">2</span>
}
n

<span class="hljs-keyword">var</span> m = <span class="hljs-number">2</span>
<span class="hljs-keyword">do</span> {
    m = m * <span class="hljs-number">2</span>
} <span class="hljs-keyword">while</span> m &lt; <span class="hljs-number">100</span>
m
</code></pre>
<p>你可以在循环中使用<code>..&lt;</code>来表示范围，也可以使用传统的写法，两者是等价的：</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> firstForLoop = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..&lt;<span class="hljs-number">4</span> {
    firstForLoop += i
}
firstForLoop

<span class="hljs-keyword">var</span> secondForLoop = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; ++i {
    secondForLoop += i
}
secondForLoop
</code></pre>
<p>使用<code>..&lt;</code>创建的范围不包含上界，如果想包含的话需要使用<code>...</code>。</p>
<p><a name="functions_and_closures"></a></p>
<h2 id="">函数和闭包</h2>
<p>使用<code>func</code>来声明一个函数，使用名字和参数来调用函数。使用<code>-&gt;</code>来指定函数返回值。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: String, day: String)</span> -&gt; <span class="hljs-title">String</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello <span class="hljs-subst">\(name)</span>, today is <span class="hljs-subst">\(day)</span>."</span>
}
greet(<span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Tuesday"</span>)
</code></pre>
<blockquote>
<p>练习：
删除<code>day</code>参数，添加一个参数来表示今天吃了什么午饭。</p>
</blockquote>
<p>使用元组来让一个函数返回多个值。该元组的元素可以用名称或数字来表示。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">calculateStatistics</span><span class="hljs-params">(scores: [Int])</span> -&gt; <span class="hljs-params">(<span class="hljs-built_in">min</span>: Int, <span class="hljs-built_in">max</span>: Int, sum: Int)</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">min</span> = scores[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">max</span> = scores[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>

    <span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> scores {
        <span class="hljs-keyword">if</span> score &gt; <span class="hljs-built_in">max</span> {
            <span class="hljs-built_in">max</span> = score
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> score &lt; <span class="hljs-built_in">min</span> {
            <span class="hljs-built_in">min</span> = score
        }
        sum += score
    }

    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">min</span>, <span class="hljs-built_in">max</span>, sum)
}
<span class="hljs-keyword">let</span> statistics = calculateStatistics([<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>])
statistics.sum
statistics.<span class="hljs-number">2</span>
</code></pre>
<p>函数可以带有可变个数的参数，这些参数在函数内表现为数组的形式：</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">sumOf</span><span class="hljs-params">(numbers: Int...)</span> -&gt; <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> numbers {
        sum += number
    }
    <span class="hljs-keyword">return</span> sum
}
sumOf()
sumOf(<span class="hljs-number">42</span>, <span class="hljs-number">597</span>, <span class="hljs-number">12</span>)
</code></pre>
<blockquote>
<p>练习：
写一个计算参数平均值的函数。</p>
</blockquote>
<p>函数可以嵌套。被嵌套的函数可以访问外侧函数的变量，你可以使用嵌套函数来重构一个太长或者太复杂的函数。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">returnFifteen</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">var</span> y = <span class="hljs-number">10</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>{
        y += <span class="hljs-number">5</span>
    }
    add()
    <span class="hljs-keyword">return</span> y
}
returnFifteen()
</code></pre>
<p>函数是第一等类型，这意味着函数可以作为另一个函数的返回值。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">makeIncrementer</span><span class="hljs-params">()</span> -&gt; <span class="hljs-params">(Int -&gt; Int)</span> </span>{
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">addOne</span><span class="hljs-params">(number: Int)</span> -&gt; <span class="hljs-title">Int</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + number
    }
    <span class="hljs-keyword">return</span> addOne
}
<span class="hljs-keyword">var</span> increment = makeIncrementer()
increment(<span class="hljs-number">7</span>)
</code></pre>
<p>函数也可以当做参数传入另一个函数。</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">hasAnyMatches</span><span class="hljs-params">(list: [Int], condition: Int -&gt; Bool)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list {
        <span class="hljs-keyword">if</span> condition(item) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">true</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">false</span>
}
<span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">lessThanTen</span><span class="hljs-params">(number: Int)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    <span class="hljs-keyword">return</span> number &lt; <span class="hljs-number">10</span>
}
<span class="hljs-keyword">var</span> numbers = [<span class="hljs-number">20</span>, <span class="hljs-number">19</span>, <span class="hljs-number">7</span>, <span class="hljs-number">12</span>]
hasAnyMatches(numbers, lessThanTen)
</code></pre>
<p>函数实际上是一种特殊的闭包，你可以使用<code>{}</code>来创建一个匿名闭包。使用<code>in</code>将参数和返回值类型声明与闭包函数体进行分离。</p>
<pre><code class="lang-swift">numbers.<span class="hljs-built_in">map</span>({
    (number: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">let</span> result = <span class="hljs-number">3</span> * number
    <span class="hljs-keyword">return</span> result
})
</code></pre>
<blockquote>
<p>练习：
重写闭包，对所有奇数返回0。</p>
</blockquote>
<p>有很多种创建闭包的方法。如果一个闭包的类型已知，比如作为一个回调函数，你可以忽略参数的类型和返回值。单个语句闭包会把它语句的值当做结果返回。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> mappedNumbers = numbers.<span class="hljs-built_in">map</span>({ number <span class="hljs-keyword">in</span> <span class="hljs-number">3</span> * number })
mappedNumbers
</code></pre>
<p>你可以通过参数位置而不是参数名字来引用参数——这个方法在非常短的闭包中非常有用。当一个闭包作为最后一个参数传给一个函数的时候，它可以直接跟在括号后面。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> sortedNumbers = sorted(numbers) { $<span class="hljs-number">0</span> &gt; $<span class="hljs-number">1</span> }
sortedNumbers
</code></pre>
<p><a name="objects_and_classes"></a></p>
<h2 id="">对象和类</h2>
<p>使用<code>class</code>和类名来创建一个类。类中属性的声明和常量、变量声明一样，唯一的区别就是它们的上下文是类。同样，方法和函数声明也一样。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-keyword">var</span> numberOfSides = <span class="hljs-number">0</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"A shape with <span class="hljs-subst">\(numberOfSides)</span> sides."</span>
    }
}
</code></pre>
<blockquote>
<p>练习：
使用<code>let</code>添加一个常量属性，再添加一个接收一个参数的方法。</p>
</blockquote>
<p>要创建一个类的实例，在类名后面加上括号。使用点语法来访问实例的属性和方法。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">var</span> shape = <span class="hljs-type">Shape</span>()
shape.numberOfSides = <span class="hljs-number">7</span>
<span class="hljs-keyword">var</span> shapeDescription = shape.simpleDescription()
</code></pre>
<p>这个版本的<code>Shape</code>类缺少了一些重要的东西：一个构造函数来初始化类实例。使用<code>init</code>来创建一个构造器。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NamedShape</span> </span>{
    <span class="hljs-keyword">var</span> numberOfSides: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>

    <span class="hljs-keyword">init</span>(name: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.name = name
    }

    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"A shape with <span class="hljs-subst">\(numberOfSides)</span> sides."</span>
    }
}
</code></pre>
<p>注意<code>self</code>被用来区别实例变量。当你创建实例的时候，像传入函数参数一样给类传入构造器的参数。每个属性都需要赋值——无论是通过声明（就像<code>numberOfSides</code>）还是通过构造器（就像<code>name</code>）。</p>
<p>如果你需要在删除对象之前进行一些清理工作，使用<code>deinit</code>创建一个析构函数。</p>
<p>子类的定义方法是在它们的类名后面加上父类的名字，用冒号分割。创建类的时候并不需要一个标准的根类，所以你可以忽略父类。</p>
<p>子类如果要重写父类的方法的话，需要用<code>override</code>标记——如果没有添加<code>override</code>就重写父类方法的话编译器会报错。编译器同样会检测<code>override</code>标记的方法是否确实在父类中。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span>: <span class="hljs-title">NamedShape</span> </span>{
    <span class="hljs-keyword">var</span> sideLength: <span class="hljs-type">Double</span>

    <span class="hljs-keyword">init</span>(sideLength: <span class="hljs-type">Double</span>, name: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.sideLength = sideLength
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(name: name)
        numberOfSides = <span class="hljs-number">4</span>
    }

    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> -&gt;  <span class="hljs-title">Double</span> </span>{
        <span class="hljs-keyword">return</span> sideLength * sideLength
    }

    <span class="hljs-keyword">override</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"A square with sides of length <span class="hljs-subst">\(sideLength)</span>."</span>
    }
}
<span class="hljs-keyword">let</span> test = <span class="hljs-type">Square</span>(sideLength: <span class="hljs-number">5.2</span>, name: <span class="hljs-string">"my test square"</span>)
test.area()
test.simpleDescription()
</code></pre>
<blockquote>
<p>练习：
创建<code>NamedShape</code>的另一个子类<code>Circle</code>，构造器接收两个参数，一个是半径一个是名称，实现<code>area</code>和<code>describe</code>方法。</p>
</blockquote>
<p>属性可以有 getter 和 setter 。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EquilateralTriangle</span>: <span class="hljs-title">NamedShape</span> </span>{
    <span class="hljs-keyword">var</span> sideLength: <span class="hljs-type">Double</span> = <span class="hljs-number">0.0</span>

    <span class="hljs-keyword">init</span>(sideLength: <span class="hljs-type">Double</span>, name: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.sideLength = sideLength
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(name: name)
        numberOfSides = <span class="hljs-number">3</span>
    }

    <span class="hljs-keyword">var</span> perimeter: <span class="hljs-type">Double</span> {
    <span class="hljs-keyword">get</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">3.0</span> * sideLength
    }
    <span class="hljs-keyword">set</span> {
        sideLength = newValue / <span class="hljs-number">3.0</span>
    }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"An equilateral triagle with sides of length <span class="hljs-subst">\(sideLength)</span>."</span>
    }
}
<span class="hljs-keyword">var</span> triangle = <span class="hljs-type">EquilateralTriangle</span>(sideLength: <span class="hljs-number">3.1</span>, name: <span class="hljs-string">"a triangle"</span>)
triangle.perimeter
triangle.perimeter = <span class="hljs-number">9.9</span>
triangle.sideLength
</code></pre>
<p>在<code>perimeter</code>的 setter 中，新值的名字是<code>newValue</code>。你可以在<code>set</code>之后显式的设置一个名字。</p>
<p>注意<code>EquilateralTriangle</code>类的构造器执行了三步：</p>
<ol>
<li>设置子类声明的属性值</li>
<li>调用父类的构造器</li>
<li>改变父类定义的属性值。其他的工作比如调用方法、getters和setters也可以在这个阶段完成。</li>
</ol>
<p>如果你不需要计算属性，但是仍然需要在设置一个新值之前或者之后运行代码，使用<code>willSet</code>和<code>didSet</code>。</p>
<p>比如，下面的类确保三角形的边长总是和正方形的边长相同。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TriangleAndSquare</span> </span>{
    <span class="hljs-keyword">var</span> triangle: <span class="hljs-type">EquilateralTriangle</span> {
    <span class="hljs-keyword">willSet</span> {
        square.sideLength = newValue.sideLength
    }
    }
    <span class="hljs-keyword">var</span> square: <span class="hljs-type">Square</span> {
    <span class="hljs-keyword">willSet</span> {
        triangle.sideLength = newValue.sideLength
    }
    }
    <span class="hljs-keyword">init</span>(size: <span class="hljs-type">Double</span>, name: <span class="hljs-type">String</span>) {
        square = <span class="hljs-type">Square</span>(sideLength: size, name: name)
        triangle = <span class="hljs-type">EquilateralTriangle</span>(sideLength: size, name: name)
    }
}
<span class="hljs-keyword">var</span> triangleAndSquare = <span class="hljs-type">TriangleAndSquare</span>(size: <span class="hljs-number">10</span>, name: <span class="hljs-string">"another test shape"</span>)
triangleAndSquare.square.sideLength
triangleAndSquare.triangle.sideLength
triangleAndSquare.square = <span class="hljs-type">Square</span>(sideLength: <span class="hljs-number">50</span>, name: <span class="hljs-string">"larger square"</span>)
triangleAndSquare.triangle.sideLength
</code></pre>
<p>类中的方法和一般的函数有一个重要的区别，函数的参数名只在函数内部使用，但是方法的参数名需要在调用的时候显式说明（除了第一个参数）。默认情况下，方法的参数名和它在方法内部的名字一样，不过你也可以定义第二个名字，这个名字被用在方法内部。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">count</span>: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">incrementBy</span><span class="hljs-params">(amount: Int, numberOfTimes times: Int)</span> </span>{
        <span class="hljs-built_in">count</span> += amount * times
    }
}
<span class="hljs-keyword">var</span> counter = <span class="hljs-type">Counter</span>()
counter.incrementBy(<span class="hljs-number">2</span>, numberOfTimes: <span class="hljs-number">7</span>)
</code></pre>
<p>处理变量的可选值时，你可以在操作（比如方法、属性和子脚本）之前加<code>?</code>。如果<code>?</code>之前的值是<code>nil</code>，<code>?</code>后面的东西都会被忽略，并且整个表达式返回<code>nil</code>。否则，<code>?</code>之后的东西都会被运行。在这两种情况下，整个表达式的值也是一个可选值。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> optionalSquare: <span class="hljs-type">Square</span>? = <span class="hljs-type">Square</span>(sideLength: <span class="hljs-number">2.5</span>, name: <span class="hljs-string">"optional square"</span>)
<span class="hljs-keyword">let</span> sideLength = optionalSquare?.sideLength
</code></pre>
<p><a name="enumerations_and_structure"></a></p>
<h2 id="">枚举和结构体</h2>
<p>使用<code>enum</code>来创建一个枚举。就像类和其他所有命名类型一样，枚举可以包含方法。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Rank</span>: <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">Ace</span> = <span class="hljs-number">1</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">Two</span>, <span class="hljs-type">Three</span>, <span class="hljs-type">Four</span>, <span class="hljs-type">Five</span>, <span class="hljs-type">Six</span>, <span class="hljs-type">Seven</span>, <span class="hljs-type">Eight</span>, <span class="hljs-type">Nine</span>, <span class="hljs-type">Ten</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">Jack</span>, <span class="hljs-type">Queen</span>, <span class="hljs-type">King</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Ace</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ace"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Jack</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"jack"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Queen</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"queen"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">King</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"king"</span>
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>(<span class="hljs-keyword">self</span>.rawValue())
        }
    }
}
<span class="hljs-keyword">let</span> ace = <span class="hljs-type">Rank</span>.<span class="hljs-type">Ace</span>
<span class="hljs-keyword">let</span> aceRawValue = ace.rawValue()
</code></pre>
<blockquote>
<p>练习：
写一个函数，通过比较它们的原始值来比较两个<code>Rank</code>值。</p>
</blockquote>
<p>在上面的例子中，枚举原始值的类型是<code>Int</code>，所以你只需要设置第一个原始值。剩下的原始值会按照顺序赋值。你也可以使用字符串或者浮点数作为枚举的原始值。</p>
<p>使用&#39;rawValue&#39;在原始值和枚举值之间进行转换。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> convertedRank = <span class="hljs-type">Rank</span>(rawValue: <span class="hljs-number">3</span>) {
    <span class="hljs-keyword">let</span> threeDescription = convertedRank.simpleDescription()
}
</code></pre>
<p>枚举的成员值是实际值，并不是原始值的另一种表达方法。实际上，如果原始值没有意义，你不需要设置。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Suit</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">Spades</span>, <span class="hljs-type">Hearts</span>, <span class="hljs-type">Diamonds</span>, <span class="hljs-type">Clubs</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Spades</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"spades"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Hearts</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"hearts"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Diamonds</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"diamonds"</span>
        <span class="hljs-keyword">case</span> .<span class="hljs-type">Clubs</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"clubs"</span>
        }
    }

}
<span class="hljs-keyword">let</span> hearts = <span class="hljs-type">Suit</span>.<span class="hljs-type">Hearts</span>
<span class="hljs-keyword">let</span> heartsDescription = hearts.simpleDescription()
</code></pre>
<blockquote>
<p>练习：
给<code>Suit</code>添加一个<code>color</code>方法，对<code>spades</code>和<code>clubs</code>返回“black”，对<code>hearts</code>和<code>diamonds</code>返回“red”。</p>
</blockquote>
<p>注意，有两种方式可以引用<code>Hearts</code>成员：给<code>hearts</code>常量赋值时，枚举成员<code>Suit.Hearts</code>需要用全名来引用，因为常量没有显式指定类型。在<code>switch</code>里，枚举成员使用缩写<code>.Hearts</code>来引用，因为<code>self</code>的值已经知道是一个<code>suit</code>。已知变量类型的情况下你可以使用缩写。</p>
<p>使用<code>struct</code>来创建一个结构体。结构体和类有很多相同的地方，比如方法和构造器。它们之间最大的一个区别就是
结构体是传值，类是传引用。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Card</span> </span>{
    <span class="hljs-keyword">var</span> rank: <span class="hljs-type">Rank</span>
    <span class="hljs-keyword">var</span> suit: <span class="hljs-type">Suit</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleDescription</span><span class="hljs-params">()</span> -&gt; <span class="hljs-title">String</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"The <span class="hljs-subst">\(rank.simpleDescription()</span>) of <span class="hljs-subst">\(suit.simpleDescription()</span>)"</span>
    }
}
<span class="hljs-keyword">let</span> threeOfSpades = <span class="hljs-type">Card</span>(rank: .<span class="hljs-type">Three</span>, suit: .<span class="hljs-type">Spades</span>)
<span class="hljs-keyword">let</span> threeOfSpadesDescription = threeOfSpades.simpleDescription()
</code></pre>
<blockquote>
<p>练习：
给<code>Card</code>添加一个方法，创建一副完整的扑克牌并把每张牌的 rank 和 suit 对应起来。</p>
</blockquote>
<p>一个枚举成员的实例可以有实例值。相同枚举成员的实例可以有不同的值。创建实例的时候传入值即可。实例值和原始值是不同的：枚举成员的原始值对于所有实例都是相同的，而且你是在定义枚举的时候设置原始值。</p>
<p>例如，考虑从服务器获取日出和日落的时间。服务器会返回正常结果或者错误信息。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">ServerResponse</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">Result</span>(<span class="hljs-type">String</span>, <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-type">Error</span>(<span class="hljs-type">String</span>)
}

<span class="hljs-keyword">let</span> success = <span class="hljs-type">ServerResponse</span>.<span class="hljs-type">Result</span>(<span class="hljs-string">"6:00 am"</span>, <span class="hljs-string">"8:09 pm"</span>)
<span class="hljs-keyword">let</span> failure = <span class="hljs-type">ServerResponse</span>.<span class="hljs-type">Error</span>(<span class="hljs-string">"Out of cheese."</span>)

<span class="hljs-keyword">switch</span> success {
<span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> .<span class="hljs-type">Result</span>(sunrise, sunset):
    <span class="hljs-keyword">let</span> serverResponse = <span class="hljs-string">"Sunrise is at <span class="hljs-subst">\(sunrise)</span> and sunset is at <span class="hljs-subst">\(sunset)</span>."</span>
<span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> .<span class="hljs-type">Error</span>(error):
    <span class="hljs-keyword">let</span> serverResponse = <span class="hljs-string">"Failure...  <span class="hljs-subst">\(error)</span>"</span>
}
</code></pre>
<blockquote>
<p>练习：
给<code>ServerResponse</code>和<code>switch</code>添加第三种情况。</p>
</blockquote>
<p>注意如何从<code>ServerResponse</code>中提取日升和日落时间。</p>
<p><a name="protocols_and_extensions"></a></p>
<h2 id="">协议和扩展</h2>
<p>使用<code>protocol</code>来声明一个协议。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> }
    <span class="hljs-keyword">mutating</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span>
}</span>
</code></pre>
<p>类、枚举和结构体都可以实现协议。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleClass</span>: <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> = <span class="hljs-string">"A very simple class."</span>
    <span class="hljs-keyword">var</span> anotherProperty: <span class="hljs-type">Int</span> = <span class="hljs-number">69105</span>
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span> </span>{
        simpleDescription += <span class="hljs-string">"  Now 100% adjusted."</span>
    }
}
<span class="hljs-keyword">var</span> a = <span class="hljs-type">SimpleClass</span>()
a.adjust()
<span class="hljs-keyword">let</span> aDescription = a.simpleDescription

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SimpleStructure</span>: <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> = <span class="hljs-string">"A simple structure"</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span> </span>{
        simpleDescription += <span class="hljs-string">" (adjusted)"</span>
    }
}
<span class="hljs-keyword">var</span> b = <span class="hljs-type">SimpleStructure</span>()
b.adjust()
<span class="hljs-keyword">let</span> bDescription = b.simpleDescription
</code></pre>
<blockquote>
<p>练习：
写一个实现这个协议的枚举。</p>
</blockquote>
<p>注意声明<code>SimpleStructure</code>时候<code>mutating</code>关键字用来标记一个会修改结构体的方法。<code>SimpleClass</code>的声明不需要标记任何方法因为类中的方法经常会修改类。</p>
<p>使用<code>extension</code>来为现有的类型添加功能，比如新的方法和参数。你可以使用扩展来改造定义在别处，甚至是从外部库或者框架引入的一个类型，使得这个类型遵循某个协议。</p>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">Int</span>: <span class="hljs-title">ExampleProtocol</span> </span>{
    <span class="hljs-keyword">var</span> simpleDescription: <span class="hljs-type">String</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"The number <span class="hljs-subst">\(<span class="hljs-keyword">self</span>)</span>"</span>
    }
    <span class="hljs-keyword">mutating</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">adjust</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">self</span> += <span class="hljs-number">42</span>
    }
}
<span class="hljs-number">7</span>.simpleDescription
</code></pre>
<blockquote>
<p>练习：
给<code>Double</code>类型写一个扩展，添加<code>absoluteValue</code>功能。</p>
</blockquote>
<p>你可以像使用其他命名类型一样使用协议名——例如，创建一个有不同类型但是都实现一个协议的对象集合。当你处理类型是协议的值时，协议外定义的方法不可用。</p>
<pre><code class="lang-swift"><span class="hljs-keyword">let</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span><span class="hljs-title">Value</span>: <span class="hljs-title">ExampleProtocol</span> = <span class="hljs-title">a</span>
<span class="hljs-title">protocolValue</span>.<span class="hljs-title">simpleDescription</span>
// <span class="hljs-title">protocolValue</span>.<span class="hljs-title">anotherProperty</span>  // <span class="hljs-title">Uncomment</span> <span class="hljs-title">to</span> <span class="hljs-title">see</span> <span class="hljs-title">the</span> <span class="hljs-title">error</span></span>
</code></pre>
<p>即使<code>protocolValue</code>变量运行时的类型是<code>simpleClass</code>，编译器会把它的类型当做<code>ExampleProtocol</code>。这表示你不能调用类在它实现的协议之外实现的方法或者属性。</p>
<p><a name="generics"></a></p>
<h2 id="">泛型</h2>
<p>在尖括号里写一个名字来创建一个泛型函数或者类型。</p>
<pre><code class="lang-swift">func repeat&lt;ItemType&gt;(item: ItemType, times: Int) -&gt; [ItemType] {
    var result = [ItemType]()
    for i in 0..&lt;times {
        result.append(item)
    }
    return result
}
repeat("knock", 4)
</code></pre>
<p>你也可以创建泛型类、枚举和结构体。</p>
<pre><code class="lang-swift"><span class="hljs-comment">// Reimplement the Swift standard library's optional type</span>
<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OptionalValue</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-type">None</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">Some</span>(<span class="hljs-type">T</span>)
}
<span class="hljs-keyword">var</span> possibleInteger: <span class="hljs-type">OptionalValue</span>&lt;<span class="hljs-type">Int</span>&gt; = .<span class="hljs-type">None</span>
possibleInteger = .<span class="hljs-type">Some</span>(<span class="hljs-number">100</span>)
</code></pre>
<p>在类型名后面使用<code>where</code>来指定对类型的需求，比如，限定类型实现某一个协议，限定两个类型是相同的，或者限定某个类必须有一个特定的父类</p>
<pre><code class="lang-swift"><span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">anyCommonElements</span> <span class="hljs-generics">&lt;T, U where T: SequenceType, U: SequenceType, T.Generator.Element: Equatable, T.Generator.Element == U.Generator.Element&gt;</span> <span class="hljs-params">(lhs: T, rhs: U)</span> -&gt; <span class="hljs-title">Bool</span> </span>{
    <span class="hljs-keyword">for</span> lhsItem <span class="hljs-keyword">in</span> lhs {
        <span class="hljs-keyword">for</span> rhsItem <span class="hljs-keyword">in</span> rhs {
            <span class="hljs-keyword">if</span> lhsItem == rhsItem {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">true</span>
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">false</span>
}
anyCommonElements([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">3</span>])
</code></pre>
<blockquote>
<p>练习：
修改<code>anyCommonElements</code>函数来创建一个函数，返回一个数组，内容是两个序列的共有元素。</p>
</blockquote>
<p>简单起见，你可以忽略<code>where</code>，只在冒号后面写协议或者类名。<code>&lt;T: Equatable&gt;</code>和<code>&lt;T where T: Equatable&gt;</code>是等价的。</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../index.html" class="navigation navigation-prev " aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../big_o_notation/README.html" class="navigation navigation-next " aria-label="Next page: Big O Notation"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
